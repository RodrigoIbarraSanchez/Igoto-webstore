<!-- /banner_bottom_agile_info -->

<!--div class="page-head_agile_info_w3l">
	<div class="container">
		<h3 style="color: black">Carrito de compras</h3>
		<div class="services-breadcrumb">
			<div class="agile_inner_breadcrumb">

				<ul class="w3_short">
					<li><a href="https://calentadorsolar.co/catalogo.html#!/">Catálogo</a><i>|</i></li>
					<li>Detalle de Producto</li>
					<li><a style="text-decoration: none;" ng-click="openRegistroModal()">Regístrate</a></li>
				</ul>
			</div>
		</div>
	</div>
</div-->
<div class="header-bot">
	<div class="header-bot_inner_wthreeinfo_header_mid">
		<div class="col-md-4 header-middle">
			
		</div>
		<!-- header-bot -->
			<div class="col-md-4 logo_agile">
				<a href="https://goniapp.com">
					<img src="img/theme-1/logo.png" alt="">
				</a><br><br>
				<h2>CARRITO DE COMPRAS</h2>
			</div>
        <!-- header-bot -->
		<div class="col-md-4 agileits-social top_content">

		</div>
		<div class="clearfix"></div>
	</div>
</div>
<div class="ban-top">
	<div class="container">
		<div class="">
			<nav class="navbar navbar-default" style="width: 100%">
			  <div class="container-fluid">
				<div class="navbar-header">
				  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false" ng-click="isNavCollapsed = !isNavCollapsed">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				  </button>
				</div>
				<div class="collapse navbar-collapse menu--shylock" uib-collapse="isNavCollapsed">
				  <ul class="nav navbar-nav menu__list navbar-left" >
					<a href="https://goniapp.com/catalogo.html#!/" class="menu__link" style="color:white!important;">Catálogo <span class="sr-only">(current)</span></a>
				  </ul>
				  <ul class="nav navbar-nav menu__list navbar-right" >
					<a ng-if="user == undefined" ng-click="openLoginModal()" class="menu__link" style="color:white!important;">Iniciar sesión <span class="sr-only">(current)</span></a>
					<a ng-if="user == undefined" ng-click="openRegistroModal()" class="menu__link" style="color:white!important;">Regístrarse <span class="sr-only">(current)</span></a>
					<a ng-if="user != undefined" class="menu__link" style="color:white!important;">{{user.email}} <span class="sr-only">(current)</span></a>
					<a ng-click="logout()" ng-if="user != undefined" class="menu__link" style="color:white!important;">Cerrar sesíón <span class="sr-only">(current)</span></a>
				  </ul>
				</div>
				<!--div class="collapse navbar-collapse menu--shylock" id="bs-example-navbar-collapse-1" style="visibility: hidden" uib-collapse="isNavCollapsed">
				  <ul class="nav navbar-nav menu__list">
					<li ng-repeat="category in categories" ng-model="category._id" ng-class="{'resp-tab-active': tab === $index}" ng-click="selectCategory(category._id,$index)" >
						{{category.categoria}}
					</li>
				  </ul>
				</div-->
			  </div>
			</nav>	
		</div>
		<div class="clearfix"></div>
	</div>
</div>
<!-- banner-bootom-w3-agileits -->
<div class="banner-bootom-w3-agileits" style="margin-top: 75px">
	<div class="container pa-llevar">
		<div ng-show="!load" style="padding: 20px">

			<!--h1 id="title">Carrito <img src="img/purple-carr.png" /></h1-->
			
			<div class="row" id="lista-productos" ng-repeat="p in listaProductos track by $index">

				<div class="col-md-4 col-xs-6 col-sm-4">
					<div id="image" style="background-image: url({{ p.imagenes[0] }});margin: 0 auto">
						<img src="img/eliminar.png" ng-click="eliminarProducto(p._id);"/>
					</div>
				</div>

				<div class="col-md-8 col-xs-6 col-sm-8">
					<div id="descripcion">
						<p id="nombre">{{ p.nombre }}</p>
						<p id="precio">${{ (p.precio * p.noPiezas) + p.costoEnvio }} MXN c/ envió</p>
					</div>
				</div>
			</div>

			<div class="row metodos-pago" ng-if="listaProductos && listaProductos.length > 0">
				
				<div class="col-md-4 col-xs-0 col-sm-4">
					
				</div>

				<div class="col-md-4 col-xs-12 col-sm-8">
					<div>
						<label>Selecciona un método de pago</label>
						<ul style="padding: 14px">
					 		<li ng-repeat="m in listaMetodosPago" name="metodosPago" ng-show="m.identificador != 4 && m.identificador != 5" style="list-style: none;">
					 			<input type="radio" ng-model="pedido.metodoPago" 
								ng-value="m.identificador" >
									<i class="icon ion-android-sync" ng-show="m.identificador == 1"></i>
									<i class="icon ion-cash	" ng-show="m.identificador == 3"></i>
									<span>{{m.metodo}}</span>
					 		</li>
						</ul>
					</div>
					
					<div class="datos-tarjeta" ng-if="pedido.metodoPago == 1 && (!usuario.customer || !usuario.customer.id)" style="padding: 14px">
						<label>Ingrese los datos de su tarjeta</label>

						<div class="form-group">
							<input type="text" name="cardName" placeholder="Nombre del titular" 
								minlength="2" maxlength="150" 
								ng-model="tarjeta.name" class="input-text form-control" required />

							<div class="help-block" ng-messages="formCompra.cardName.$error"
								ng-if="formCompra.cardName.$touched"
								ng-class="{ 'text-danger': formCompra.cardName.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group">
							<input type="text" name="cardNumber" placeholder="Número de tarjeta de crédito" 
								minlength="16" maxlength="18" ng-number
								ng-model="tarjeta.number" class="input-text form-control" required />

							<div class="help-block" ng-messages="formCompra.cardNumber.$error"
								ng-if="formCompra.cardNumber.$touched"
								ng-class="{ 'text-danger': formCompra.cardNumber.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group">
							<input type="text" name="cvc" placeholder="CVC" 
								minlength="3" maxlength="4" ng-number
								ng-model="tarjeta.cvc" class="input-text form-control" required />

							<div class="help-block" ng-messages="formCompra.cvc.$error"
								ng-if="formCompra.cvc.$touched"
								ng-class="{ 'text-danger': formCompra.cvc.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group">

							<label class = "item item-input item-select">
								<div class = "input-label">
									Mes
								</div>

								<select name="fmes" id="fmes" ng-model="tarjeta.exp_month" required class="form-control">
									<option value="">------</option>
									<option value="01">01</option>
									<option value="02">02</option>
									<option value="03">03</option>
									<option value="04">04</option>
									<option value="05">05</option>
									<option value="06">06</option>
									<option value="07">07</option>
									<option value="08">08</option>
									<option value="09">09</option>
									<option value="10">10</option>
									<option value="11">11</option>
									<option value="12">12</option>
								</select>
							</label>

							<div class="help-block" ng-messages="formCompra.fmes.$error"
								ng-if="formCompra.fmes.$touched"
								ng-class="{ 'text-danger': formCompra.fmes.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group">

							<label class = "item item-input item-select">
								<div class = "input-label">
									Año
								</div>

								<select name="fmes" id="fanio" ng-model="tarjeta.exp_year" required class="form-control">
									<option value="">------</option>
									<option ng-repeat="a in anios track by $index"
										value="{{ a }}">{{ a }}</option>
								</select>
							</label>

							<div class="help-block" ng-messages="formCompra.fanio.$error"
								ng-if="formCompra.fanio.$touched"
								ng-class="{ 'text-danger': formCompra.fanio.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>
					</div>
					<div class="datos-tarjeta" ng-if="pedido.metodoPago == 1 && usuario.customer && usuario.customer.id" style="padding: 14px">
						
						<p>
							Tarjeta: {{ tarjeta.payment_sources.data[0].brand }}
						</p>
						
						<p>
							Número de tarjeta: **** **** **** {{ tarjeta.payment_sources.data[0].last4 }}
						</p>

						<p>
							Fecha de vencimiento: {{ tarjeta.payment_sources.data[0].exp_month + '-' + tarjeta.payment_sources.data[0].exp_year }}
						</p>
					</div>
					<div class="informacion-usuario" ng-if="listaProductos && listaProductos.length > 0">

						<label>Dirección de envío</label>
						<div style="padding: 14px">
							<p ng-bind="'Email: ' + usuario.email"></p>
							<p ng-show="usuario.direccionEnvio.telefono"
								ng-bind="'Teléfono: ' + usuario.direccionEnvio.telefono"></p>
							<p ng-show="usuario.direccionEnvio.calle"
								ng-bind="'Dirección: ' + usuario.direccionEnvio.calle"></p>
							<p ng-show="usuario.direccionEnvio.numero"
								ng-bind="'Número: ' + usuario.direccionEnvio.numero"></p>
							<p ng-show="usuario.direccionEnvio.codigoPostal"
								ng-bind="'Código Postal: ' + usuario.direccionEnvio.codigoPostal"></p>
							<p ng-show="usuario.direccionEnvio.estado"
								ng-bind="'Estado: ' + usuario.direccionEnvio.estado"></p>
							<p ng-show="usuario.direccionEnvio.municipio" style="margin-bottom: 10%;" 
								ng-bind="'Municipio: ' + usuario.direccionEnvio.municipio" class="direccionEnvio"></p>
						</div>
						
						
						<div class="form-group" ng-if="!usuario.nombreCompleto">
							<input type="text" name="nombreCompleto" placeholder="Nombre" 
								ng-model="pedido.usuario.nombreCompleto" minlength="2"
								maxlength="150" class="input-text form-control" required />

							<div class="help-block" ng-messages="formCompra.nombreCompleto.$error"
								ng-if="formCompra.nombreCompleto.$touched"
								ng-class="{ 'text-danger': formCompra.nombreCompleto.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group" ng-if="!usuario.apellidos">
							<input type="text" name="apellidos" placeholder="Apellidos" 
								ng-model="pedido.usuario.apellidos" minlength="2"
								maxlength="150" class="input-text form-control" required />

							<div class="help-block" ng-messages="formCompra.apellidos.$error"
								ng-if="formCompra.apellidos.$touched"
								ng-class="{ 'text-danger': formCompra.apellidos.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group" ng-if="!usuario.direccionEnvio.calle">
							<input type="text" name="calle" placeholder="Dirección" 
								ng-model="pedido.usuario.direccionEnvio.calle"
								minlength="2" maxlength="200" class="input-text form-control" required />

							<div class="help-block" ng-messages="formCompra.calle.$error"
								ng-if="formCompra.calle.$touched"
								ng-class="{ 'text-danger': formCompra.calle.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>
						
						<div class="form-group" ng-if="!usuario.direccionEnvio.numero">
							<input type="text" name="numero" placeholder="Número de domicilio" 
								ng-model="pedido.usuario.direccionEnvio.numero" ng-numero
								class="input-text form-control" maxlength="5" minlength="1" required />

							<div class="help-block" ng-messages="formCompra.numero.$error"
								ng-if="formCompra.numero.$touched"
								ng-class="{ 'text-danger': formCompra.numero.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group" ng-if="!usuario.direccionEnvio.codigoPostal">
							<input type="text" name="cp" placeholder="Código Postal" 
								ng-model="pedido.usuario.direccionEnvio.codigoPostal" codigo-postal
								class="input-text form-control" minlength="5" maxlength="5" required />

							<div class="help-block" ng-messages="formCompra.cp.$error"
								ng-if="formCompra.cp.$touched"
								ng-class="{ 'text-danger': formCompra.cp.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>
						
						<div class="form-group" ng-if="!usuario.direccionEnvio.telefono">
							<input type="text" name="telefono" placeholder="Teléfono" 
								ng-model="pedido.usuario.direccionEnvio.telefono" minlength="10" 
								class="input-text form-control" maxlength="10" valid-telefono required />

							<div class="help-block" ng-messages="formCompra.telefono.$error"
								ng-if="formCompra.telefono.$touched"
								ng-class="{ 'text-danger': formCompra.telefono.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group" ng-if="!usuario.direccionEnvio.estado">

							<label class = "item item-input item-select">
								<div class = "input-label">
									Estado
								</div>

								<select ng-model="pedido.usuario.direccionEnvio.estado" class="form-control">
									<option value="">-------</option>
									<option ng-repeat="e in listaEstado"
										value="{{ e.estado }}">{{ e.estado }}</option>
								</select>
							</label>

							<div class="help-block" ng-messages="formCompra.estado.$error"
								ng-if="formCompra.estado.$touched"
								ng-class="{ 'text-danger': formCompra.estado.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>

						<div class="form-group" ng-if="!usuario.direccionEnvio.municipio" style="margin-bottom: 40%;">
							<input type="text" name="municipio" placeholder="Municipio" 
								ng-model="pedido.usuario.direccionEnvio.municipio"
								minlength="2" maxlength="100" class="input-text form-control" required />

							<div class="help-block" ng-messages="formCompra.municipio.$error"
								ng-if="formCompra.municipio.$touched"
								ng-class="{ 'text-danger': formCompra.municipio.$invalid}">
								<div ng-messages-include="{{'templates/error.html'}}"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="col col-md-4 col-sm-12 col-xs-12" ng-show="listaProductos && listaProductos.length > 0">
					<div class="col-md-6 col-xs-6" style="padding-top: 0;width: 50%">
						<h3 class="total-pagar">
							MX ${{ totalPagar }}
						</h3>
						<p class="text-envioinc" style="color: #fe3535">Envío incluido</p>
					</div>
					<div class="col-md-6 col-xs-6" style="width: 50%">
						<div class="snipcart-details top_brand_home_details item_add single-item hvr-outline-out button2" ng-if="procesandoCompra == false">
							<input type="button" value="Pagar" class="button" ng-click="realizarPago()" >
						</div>
						<div class="snipcart-details top_brand_home_details item_add single-item hvr-outline-out button2" ng-if="procesandoCompra == true">
							<p style="color: white !important">Espere un momento por favor...</p>
                    		<i style="color: white !important" class="fa fa-circle-o-notch fa-spin" style="font-size:24px"></i>
						</div>
						
						<!--button class="btn btn-comprar" ng-click="realizarPago()"
							ng-disabled="formCompra.$invalid">
							Pagar
						</button-->
					</div>
				</div>
			</div>
			<div ng-if="listaProductos.length <= 0" class="notificacion">
				No se encontrarón productos en su carrito.
			</div>
		</div>
		<br>
	</div>
</div>

<!--grids-->
<!-- footer -->
<div class="footer">
	<div class="footer_agile_inner_info_w3l">

		<div class="col-md-12 footer-right">
			<div class="sign-grds">
				<div class="col-md-3"></div>
				<div class="col-md-6 sign-gd-two text-center">
					<h4><span>Información de la</span>Tienda</h4>
					<div class="w3-address">
						<div class="row">
							<div class="w3-address-grid col-md-6">
								<div class="w3-address-left">
									<i class="fa fa-phone" aria-hidden="true"></i>
								</div>
								<div class="w3-address-right">
									<h6>Número de teléfono</h6>
									<p>01 222 682 10 41</p>
								</div>
								<div class="clearfix"> </div>
							</div>
							<div class="w3-address-grid col-md-6">
								<div class="w3-address-left">
									<i class="fa fa-envelope" aria-hidden="true"></i>
								</div>
								<div class="w3-address-right">
									<h6>Email</h6>
									<p>Email: <a href="mailto:ventas@ecomaq.mx">ventas@ecomaq.mx</a></p>
								</div>
								<div class="clearfix"> </div>
							</div>
							<!--
							<div class="w3-address-grid col-md-4">
								<div class="w3-address-left">
									<i class="fa fa-map-marker" aria-hidden="true"></i>
								</div>
								<div class="w3-address-right">
									<h6>Dirección</h6>
									<p>Broome St, NY 10002,California, USA. 

									</p>
								</div>

								<div class="clearfix"> 
								</div>
							</div>
						-->
						</div>
					</div>
				</div>
				<div class="col-md-3"></div>
				<div class="clearfix"></div>
			</div>
		</div>
		<div class="clearfix"></div>
		<p class="copy-right">&copy ECOMAQ MÉXICO S.A. de C.V. Todos los derechos reservados</p>
	</div>
</div>
<!-- //footer -->
<!-- //login -->
<a href="#home" class="scroll" id="toTop" style="display: block;"> <span id="toTopHover" style="opacity: 1;"> </span></a>
<!-- js -->
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<!-- //js -->
<script src="js/modernizr.custom.js"></script>
<!-- Custom-JavaScript-File-Links --> 
<!-- cart-js -->
<script src="js/minicart.min.js"></script>
<script>
// Mini Cart
paypal.minicart.render({
	action: '#'
});

if (~window.location.search.indexOf('reset=true')) {
	paypal.minicart.reset();
}
</script>

<!-- //cart-js --> 
<!-- single -->
<script src="js/imagezoom.js"></script>
<!-- single -->
<!-- script for responsive tabs -->						
<script src="js/easy-responsive-tabs.js"></script>
<script>
	$(document).ready(function () {
		$('#horizontalTab').easyResponsiveTabs({
type: 'default', //Types: default, vertical, accordion           
width: 'auto', //auto or any width like 600px
fit: true,   // 100% fit in a container
closed: 'accordion', // Start closed if in accordion view
activate: function(event) { // Callback function if tab is switched
	var $tab = $(this);
	var $info = $('#tabInfo');
	var $name = $('span', $info);
	$name.text($tab.text());
	$info.show();
}
});
		$('#verticalTab').easyResponsiveTabs({
			type: 'vertical',
			width: 'auto',
			fit: true
		});
	});
</script>
<!-- FlexSlider -->
<script src="js/jquery.flexslider.js"></script>
<script>
// Can also be used with $(document).ready()
$(window).load(function() {
	$('.flexslider').flexslider({
		animation: "slide",
		controlNav: "thumbnails"
	});
});
</script>
<!-- //FlexSlider-->
<!-- //script for responsive tabs -->		
<!-- start-smoth-scrolling -->
<script type="text/javascript" src="js/move-top.js"></script>
<script type="text/javascript" src="js/jquery.easing.min.js"></script>
<script type="text/javascript">
	jQuery(document).ready(function($) {
		$(".scroll").click(function(event){		
			event.preventDefault();
			$('html,body').animate({scrollTop:$(this.hash).offset().top},1000);
		});
	});
</script>
<!-- here stars scrolling icon -->
<script type="text/javascript">
	$(document).ready(function() {
/*
var defaults = {
containerID: 'toTop', // fading element id
containerHoverID: 'toTopHover', // fading element hover id
scrollSpeed: 1200,
easingType: 'linear' 
};
*/

$().UItoTop({ easingType: 'easeOutQuart' });

});
</script>
<!-- //here ends scrolling icon -->